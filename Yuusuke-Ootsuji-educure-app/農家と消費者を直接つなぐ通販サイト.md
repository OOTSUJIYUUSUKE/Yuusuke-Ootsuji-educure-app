# 通販サイト

# 概要

* 農家と消費者を直接つなぐ通販サイト

# 農家と消費者を直接つなぐ通販サイト

* 規格外などの理由でスーパーなどには卸せない農作物などを、農家の方が直接消費者の方に販売できる機能

# 機能要件
| ID  | 機能要件             | 関連データ                                                                                                                        | 関連ユーザー | 備考               |
|-----|------------------|------------------------------------------------------------------------------------------------------------------------------|--------|------------------|
| 1   | **ユーザー登録・ログイン**  |                                                                                                                              |        |                  |
| 1.1 | 登録               | `users` テーブル: `user_id`, `email`, `password_hash`, `username`                                                                | 会員     | ユーザーの新規登録とログイン処理 |
| 1.2 | パスワードリセット        | `users` テーブル: `email`                                                                                                        | 会員     | パスワードリセットのリンク送信  |
| 2   | **プロフィール管理**     |                                                                                                                              |        |                  |
| 2.1 | プロフィールの表示・編集     | `user_profiles` テーブル: `user_id`, `name`, `address`, `telephone`                                                              | 会員     | プロフィールの表示・編集機能   |
| 2.2 | 購入履歴の表示          | `user_histories` テーブル: `history_id`, `user_id`, `action`, `product_id`, `timestamp`                                          | 会員     | 購入履歴の表示          |
| 2.3 | 出品履歴の表示          | `user_histories` テーブル: `history_id`, `user_id`, `action`, `product_id`, `timestamp`                                          | 会員     | 出品履歴の表示          |
| 3   | **取引機能**         |                                                                                                                              |        |                  |
| 3.1 | 商品のカート追加・削除      | `carts` テーブル: `cart_id`, `user_id`<br> `cart_items` テーブル: `cart_item_id`, `cart_id`, `product_id`, `quantity`                | 会員     | カート内の商品管理        |
| 3.2 | 購入手続き            | `orders` テーブル: `order_id`, `user_id`, `product_id`, `price`, `payment_method`, `shipping_info`, `order_status`, `created_at` | 会員     | 注文の処理と決済         |
| 3.3 | 注文の確認・キャンセル      | `orders` テーブル: `order_id`, `user_id`, `product_id`, `price`, `order_status`                                                  | 会員     | 注文の状況確認とキャンセル    |
| 4   | **商品関連**         |                                                                                                                              |        |                  |
| 4.1 | 商品の検索            | `products` テーブル: `product_id`, `product_name`, `price`                                                                       | 会員     | 商品を検索する機能        |
| 4.2 | 商品詳細の表示          | `products` テーブル: `product_id`, `product_name`, `description`, `price`, `image_data`                                           | 会員     | 商品の詳細情報を表示       |
| 4.3 | 商品の出品            | `products` テーブル: `product_id`, `seller_id`, `product_name`, `description`, `price`, `image_data`, `created_at`                | 会員     | 商品の出品            |
| 5   | **ユーザー管理 (管理者)** |                                                                                                                              |        |                  |
| 5.1 | アカウントの編集・削除      | `users` テーブル: `user_id`, `email`, `username`                                                                                 | 管理者    | ユーザーアカウントの管理     |
| 6   | **商品管理 (管理者)**   |                                                                                                                              |        |                  |
| 6.1 | 商品の承認・削除         | `products` テーブル: `product_id`, `approval_status`                                                                             | 管理者    | 商品の承認・削除処理       |
| 7   | **注文管理 (管理者)**   |                                                                                                                              |        |                  |
| 7.1 | 注文の確認・キャンセル      | `orders` テーブル: `order_id`, `user_id`, `product_id`, `price`, `order_status`                                                  | 管理者    | 注文の確認とキャンセル      |
| 8   | **サポート対応 (管理者)** |                                                                                                                              |        |                  |
| 8.1 | 問い合わせの対応         | `support_tickets` テーブル: `ticket_id`, `user_id`, `query_content`, `status`, `created_at`, `updated_at`, `assigned_to`         | 管理者    | サポートチケットの管理      |

# 画面要件
| ID  | 画面名            | 画面説明                          | 遷移前画面          | 備考  |
|-----|----------------|-------------------------------|----------------|-----|
| 1   | トップ画面          | サイトのホーム画面。新規登録またはログインを選択する画面。 | -              |     |
| 2   | ユーザー登録画面       | ユーザーの新規登録を行う画面                | トップ画面          |     |
| 3   | ログイン画面         | ユーザーがログインする画面                 | トップ画面          |     |
| 4   | パスワードリセット画面    | パスワードリセット用のリンクを送信する画面         | ログイン画面         |     |
| 5   | プロフィール画面       | ユーザーのプロフィール情報を表示・編集する画面       | ログイン後、またはマイページ |     |
| 6   | カート画面          | カート内の商品を表示し、管理する画面            | 商品一覧画面         |     |
| 7   | 購入手続き画面        | 支払い方法と配送情報を入力する画面             | カート画面          |     |
| 8   | 注文確認画面         | 注文の詳細を確認し、キャンセルできる画面          | 購入手続き画面        |     |
| 9   | 商品一覧画面         | 商品の一覧を表示し、検索・フィルタリングする画面      | ログイン画面         |     |
| 10  | 商品詳細画面         | 商品の詳細情報を表示する画面                | 商品一覧画面         |     |
| 11  | 商品出品画面         | 新しい商品を出品するための画面               | 商品一覧画面         |     |
| 12  | ユーザー管理画面 (管理者) | ユーザーのアカウントを管理する画面             | 管理者ダッシュボード     |     |
| 13  | 商品管理画面 (管理者)   | 商品の承認・削除を行う画面                 | 管理者ダッシュボード     |     |
| 14  | 注文管理画面 (管理者)   | 注文の確認・キャンセルを行う画面              | 管理者ダッシュボード     |     |
| 15  | サポート対応画面 (管理者) | サポートチケットの管理・対応を行う画面           | 管理者ダッシュボード     |     |
| 16  | アクセス制御画面 (管理者) | ユーザーのアクセス権限を管理する画面            | 管理者ダッシュボード     |     |
| 17  | 管理者ダッシュボード     | 管理者の全機能を集約したダッシュボード画面         | ログイン画面          |     |

# ユーザー管理機能

- **ユーザー登録・ログイン**
    - 新規ユーザー登録
    - ユーザーのログイン
    - パスワードリセットのリクエスト

- **プロフィール管理**
    - プロフィール情報の表示
    - プロフィール情報の編集（名前、住所、電話番号）
    - 購入履歴の表示
    - 出品履歴の表示

- **アカウント管理**
    - アカウントの有効/無効状態の変更
    - アカウントの削除


# ユースケース図
* useCase.pdfを参照
